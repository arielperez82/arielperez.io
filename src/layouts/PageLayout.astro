---
// src/layouts/ContentLayout.astro
import Footer from '@/components/Footer'
import Header from '@/components/Header'
import OptimizedImage from '@/components/OptimizedImage'
import BaseLayout from '@/layouts/BaseLayout.astro'

export interface Props {
  title: string
  description: string
  pageTitle?: string
  subtitle?: string
  image?: string
  frontmatter?: {
    title?: string
    pageTitle?: string
    subtitle?: string
    image?: string
  }
}

let { title, description, pageTitle, subtitle, image, frontmatter } =
  Astro.props

pageTitle = frontmatter?.pageTitle || pageTitle
title = frontmatter?.title || title
subtitle = frontmatter?.subtitle || subtitle
image = frontmatter?.image || image
---

<BaseLayout title={title} description={description}>
  <Header client:load />

  <main>
    {
      (pageTitle || subtitle || image) && (
        <section class="bg-gray-50 py-16">
          <div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col items-start gap-8 lg:flex-row">
              {image && (
                <div class="flex-shrink-0">
                  <OptimizedImage
                    client:load
                    src={image}
                    alt={title}
                    className="w-48 h-48 rounded-full object-cover shadow-lg"
                    loading="eager"
                  />
                </div>
              )}
              <div class="flex-1">
                {pageTitle && (
                  <h1 class="mb-4 text-4xl font-bold text-gray-900 lg:text-5xl">
                    {pageTitle}
                  </h1>
                )}
                {subtitle && <p class="text-xl text-gray-600">{subtitle}</p>}
              </div>
            </div>
          </div>
        </section>
      )
    }

    <article class="py-16">
      <div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8">
        <div class="prose prose-lg prose-gray max-w-none">
          <slot />
        </div>
      </div>
    </article>
  </main>

  <Footer client:load />
</BaseLayout>
